# ğŸ“¦ db-backup-cli

<p align="center">
  <img src="https://icons.veryicon.com/png/o/internet--web/2022-alibaba-cloud-product-icon-cloud/cbs-database-backup.png" alt="DB Logo" width="200" >
</p>

A TypeScript CLI utility for database backups. Currently supports MySQL and PostgreSQL databases.

## ğŸš€ Installation

To install dependencies, run:

```bash
npm install
```

## ğŸ”¨ Build

Compile the TypeScript code:

```bash
npm run build
```

## ğŸ› ï¸ Usage

You can run the CLI in several ways:

### Using the CLI directly

```bash
node dist/index.js backup --dbType <database-type>
```

Replace `<database-type>` with either `mysql` or `postgres`.

### Using npm scripts

```bash
npm run pg    # For PostgreSQL backup
npm run mysql # For MySQL backup
```

## âš™ï¸ Configuration

Create a `.env` file in the project root with the following environment variables:

```env
DB_USER=your_username
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=database_port
DB_NAME=database_name
```

## ğŸ§© Project Structure

```
src/
â”œâ”€â”€ commands/       # CLI commands
â”‚   â””â”€â”€ backup.ts   # Backup command implementation
â”œâ”€â”€ config/         # Configuration
â”‚   â””â”€â”€ index.ts    # Environment variables setup
â”œâ”€â”€ index.ts        # Main entry point
â”œâ”€â”€ lib/            # Core functionality
â”‚   â””â”€â”€ backupFunctions.ts  # Database backup implementations
â””â”€â”€ utils/
    â””â”€â”€ logger.ts   # Logging utilities
```

## ğŸ” Features

- **Multiple Database Support**: Backup both MySQL and PostgreSQL databases
- **Timestamped Backups**: Each backup file includes a timestamp
- **Error Handling**: Comprehensive error handling with appropriate exit codes
- **Logging**: Detailed logging of backup operations

## ğŸ“‹ Exit Codes

- `0`: Success
- `1`: Invalid database type
- `2`: Backup operation failed

## ğŸ§ª Testing

To run tests:

```bash
npm test
```

## ğŸ“„ License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.